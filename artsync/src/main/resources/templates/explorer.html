<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" lang="">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Explorer</title>
        <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/style-explore.css}"/>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
              integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
              crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"
                integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous">
        </script>
        <script th:src="@{/js/script-explore.js}"></script>
    </head>

    <body>
    <nav th:replace="${session.user == null} ? ~{fragment/fragments :: headerFragment} : ~{fragment/fragments :: headerUserFragment}"></nav>

        <div class="container-content">
            <div class="nav-cote nav-cote-large animation" id="nav-cote">
                <button id="open-nav-cote">
                    <i id="icone-fleche" class="fas fa-times"></i>
                </button>
                <form id="filtre" method="get" action="explorerController">
                    <h3>FILTRES</h3>
                    <h5>TYPE</h5>
                    <div class="radio">
                        <label>
                            <input type="radio" name="trie" value="modelisation">
                            Modelisation
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="trie" value="art traditionnel">
                            art traditionnel
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="trie" value="art numerique">
                            art numérique
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="trie" value="animation">
                            Animation
                        </label>
                    </div>
                    <h5>TRIER PAR</h5>
                    <div class="radio">
                        <label>
                            <input type="radio" name="trie" value="popularite">
                            Popularité
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="trie" value="recent">
                            Récent
                        </label>
                    </div>
                    <div class="radio">
                        <label>
                            <input type="radio" name="trie" value="ancien">
                            Ancien
                        </label>
                    </div>
                    <button type="submit">APPLIQUER</button>
                </form>
            </div>
            <div class="container-post">

                <h2 class="animation">POSTES EN VEDETTE</h2>
                <div class="container-cards">
                    <c:if test="${not empty sessionScope.listePostes}">
                        <c:forEach var = "i" begin="0" end="${sessionScope.listePostes.size()-1}">
                            <c:if test="${i==0}">
                                <section class="card-sample card1 ">
                                    <div class="img-card" style="background-image: url(user/uploads/${sessionScope.listePostes[i].listeFichiers[0].urlMedia});"></div>
                                    <div class="text no-animation">
                                        <h2>${sessionScope.listePostes[i].titre}</h2>
                                        <p>@${sessionScope.listePostes[i].pseudoUtilisateur}</p>
                                    </div>
                                    <div class="card-post"  style="display: none;">
                                        <!--Description-->
                                        <div class="">
                                            <p>${sessionScope.listePostes[i].texte}</p>
                                        </div>
                                        <div class="liste-commentaires">

                                        </div>
                                        <!--Écrire commentaire-->
                                        <div class="env-commentaire">
                                            <div class="interactions">
                                                <div class="icones-interactions">
                                                    <div class="icon-img">
                                                        <img class="" src="media/logo/like.png" alt="">
                                                        <p>${sessionScope.listePostes[i].nbLikes} J'aime</p>
                                                    </div>
                                                    <div class="icon-img">
                                                        <img class="" src="media/logo/comment.png" alt="">
                                                        <p>2 Comments</p>
                                                    </div>
                                                    <div class="icon-img">
                                                        <img class="" src="media/logo/share.png" alt="">
                                                        <p>${sessionScope.listePostes[i].nbPartages} partage</p>
                                                    </div>
                                                    <div class="icon-img">
                                                        <img class="" src="media/logo/view.png" alt="">
                                                        <p>${sessionScope.listePostes[i].nbVues} vues</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <form class="input-box-commentaire">
                                                <input type="text" placeholder="  Écrire un commentaire...">
                                                <button class="btn-commentaire ">Envoyer</button>
                                            </form>
                                        </div>
                                    </div>
                                </section>
                            </c:if>
                            <c:if test="${i>0}">
                                <section class="card-sample ">
                                    <div class="img-card" style="background-image: url(user/uploads/${sessionScope.listePostes[i].listeFichiers[0].urlMedia});"></div>
                                    <div class="text no-animation">
                                        <h2>${sessionScope.listePostes[i].titre}</h2>
                                        <p>@${sessionScope.listePostes[i].pseudoUtilisateur}</p>
                                    </div>
                                    <div class="card-post" style="display: none;">
                                        <!--Description-->
                                        <div class="">
                                            <p>${sessionScope.listePostes[i].texte}</p>
                                        </div>
                                        <div class="liste-commentaires">

                                        </div>
                                        <!--Écrire commentaire-->
                                        <div class="env-commentaire">
                                            <div class="interactions">
                                                <div class="icones-interactions">
                                                    <div class="icon-img">
                                                        <img class="" src="media/logo/like.png" alt="">
                                                        <p>${sessionScope.listePostes[i].nbLikes} J'aime</p>
                                                    </div>
                                                    <div class="icon-img">
                                                        <img class="" src="media/logo/comment.png" alt="">
                                                        <p>2 Comments</p>
                                                    </div>
                                                    <div class="icon-img">
                                                        <img class="" src="media/logo/share.png" alt="">
                                                        <p>${sessionScope.listePostes[i].nbPartages} partage</p>
                                                    </div>
                                                    <div class="icon-img">
                                                        <img class="" src="media/logo/view.png" alt="">
                                                        <p>${sessionScope.listePostes[i].nbVues} vues</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <form class="input-box-commentaire">
                                                <input type="text" placeholder="  Écrire un commentaire...">
                                                <button class="btn-commentaire ">Envoyer</button>
                                            </form>
                                        </div>
                                    </div>
                                </section>
                            </c:if>
                        </c:forEach>
                    </c:if>
                </div>
                <h2 class="animation delais">EXPLORER</h2>
                <div class="postes-feed">
                    <c:forEach var = "post" items="${sessionScope.listePostes}">  
                        <div class="poste">
                            <img src="user/uploads/${post.listeFichiers[0].urlMedia}" alt="">
                            <div class="card-post">
                                <!--Description-->
                                <div class="">
                                    <p>${post.texte}</p>
                                </div>
                                <div class="liste-commentaires">

                                </div>
                                <!--Écrire commentaire-->
                                <div class="env-commentaire">
                                    <div class="interactions">
                                        <div class="icones-interactions">
                                            <div class="icon-img">
                                                <img class="" src="media/logo/like.png" alt="">
                                                <p>${post.nbLikes} J'aime</p>
                                            </div>
                                            <div class="icon-img">
                                                <img class="" src="media/logo/comment.png" alt="">
                                                <p>2 Comments</p>
                                            </div>
                                            <div class="icon-img">
                                                <img class="" src="media/logo/share.png" alt="">
                                                <p>${post.nbPartages} partage</p>
                                            </div>
                                            <div class="icon-img">
                                                <img class="" src="media/logo/view.png" alt="">
                                                <p>${post.nbVues} vues</p>
                                            </div>
                                        </div>
                                    </div>
                                    <form class="input-box-commentaire">
                                        <input type="text" placeholder="  Écrire un commentaire...">
                                        <button class="btn-commentaire ">Envoyer</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </c:forEach>
                </div>
            </div>
        </div>
        <!-- code de Ali -->
        <jsp:include page="footer.jsp"/>
    </body>
    <dialog id="dialog-card-focus">
        <button id="close-dialog">
            <i id="icone-fleche" class="fas fa-times"></i>
        </button>

        <div class="poste">
            <img src="media/images/3D.jpg" alt="" data-maximiser="false" style="object-fit: contain;"/>

        </div>
    </dialog>

</html>
